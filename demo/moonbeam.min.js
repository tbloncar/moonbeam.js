var moonbeam=function(){function e(e){var n=t.getNodeTree('<div class="moonbeamed"></div>')[0],i=t.getNodeTree('<a href="javascript:void(0)" class="btn">comment</a>')[0];t.transferAttrs(e,n),n.appendChild(i),n.appendChild(e.cloneNode(!0)),i.addEventListener("click",function(e){console.log(t.getSelectedText())}),e.parentNode.replaceChild(n,e)}var t=function(){function e(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(e=document.selection.createRange().text),e}function t(e,t){e.classList?e.classList.add(t):e.className+=""+t}function n(e,t){e.classList?t===!0?e.classList=[]:e.classList.remove(t):e.className=t===!0?"":e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function i(e){var t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,t.body.children}function o(e,t){for(var n,i=window.getComputedStyle(e,null),o={},r=0,s=i.length;s>r;++r)n=i[r],o[n]=i.getPropertyValue(n);for(var a in o)t.style[a]=o[a]}function r(e,i){var o=(e.getAttribute("id"),e.getAttribute("class")),r=o?o.split(" "):[];i.setAttribute("id",e.getAttribute("id"));for(var s=0,a=r.length;a>s;++s)t(i,r[s]);e.setAttribute("id",""),n(e,!0)}return{getSelectedText:e,addClass:t,removeClass:n,getNodeTree:i,transferStyles:o,transferAttrs:r}}();return{bind:e}}();