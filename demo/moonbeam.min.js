var moonbeam=function(){function e(e){var t=dom.getNodeTree(tmpl.get("container"))[0],n=dom.getNodeTree(tmpl.get("button"))[0];t.style.position="relative",n.style.position="absolute",n.style.top="0",n.style.right="5px",dom.transferAttrs(e,t),t.appendChild(n),t.appendChild(e.cloneNode(!0)),n.addEventListener("click",function(e){var t=dom.getActiveRange(),n=dom.getNodeTree('<span class="mb-hl"></span>')[0];n.addEventListener("dblclick",function(e){var t=n.parentNode;console.log(n.childNodes),t.replaceChild(n.childNodes[0],n),t.normalize()}),n.addEventListener("click",function(e){}),t&&(console.log(t.toString()),t.surroundContents(n))}),e.parentNode.replaceChild(t,e)}return{bind:e}}();
var dom=function(){function t(){var t;return window.getSelection?t=window.getSelection():document.selection&&"Control"!==document.selection.type&&(t=document.selection),t}function e(t,e){t.classList?t.classList.add(e):t.className+=""+e}function n(t,e){t.classList?e===!0?t.classList=[]:t.classList.remove(e):t.className=e===!0?"":t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function i(t){var e=document.implementation.createHTMLDocument();return e.body.innerHTML=t,e.body.children}function s(){var e,n=t();return n.rangeCount>0&&(e=n.getRangeAt(0)),e}function r(t,i){var s=(t.getAttribute("id"),t.getAttribute("class")),r=s?s.split(" "):[];i.setAttribute("id",t.getAttribute("id"));for(var o=0,c=r.length;c>o;++o)e(i,r[o]);t.setAttribute("id",""),n(t,!0)}return{addClass:e,removeClass:n,getNodeTree:i,transferAttrs:r,getActiveRange:s}}();
var tmpl=function(){function n(n){return TEMPLATECACHE[n]}return{get:n}}();
var TEMPLATECACHE={};TEMPLATECACHE.button='<a href="javascript:void(0)" class="btn">comment</a>',TEMPLATECACHE.container='<div class="mb-container"></div>';
